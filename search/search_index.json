{"config":{"lang":["vi"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"MicroPython API \u2014 ESP32/ESP32\u2011S3","text":"<p>T\u00e0i li\u1ec7u cho b\u1ed9 th\u01b0 vi\u1ec7n MEBLOCK IOT (MicroPython): MQTT, OLED (SSD1306/SH1106), DHT.</p> <pre><code>graph LR\n  A[\u1ee8ng d\u1ee5ng] --&gt;|import| B[mqtt.py]\n  A --&gt; C[oled.py]\n  A --&gt; D[aiot_dht.py]\n  B --&gt;|publish/subscribe| Broker[(MQTT Broker)]\n  C --&gt;|I2C| OLED[(SSD1306/SH1106)]\n  D --&gt;|I2C/1-wire| Sensors[(DHT20/AHT20/DHT11)]</code></pre>"},{"location":"api/aiot_dht/","title":"<code>aiot_dht</code> \u2014 DHT Sensors (DHT20/AHT20 &amp; DHT11)","text":"<p>M\u1ed9t API chung \u0111\u1ec3 \u0111\u1ecdc nhi\u1ec7t \u0111\u1ed9/\u0111\u1ed9 \u1ea9m t\u1eeb DHT20/AHT20 (I2C) v\u00e0 DHT11 (1\u2011wire).</p>"},{"location":"api/aiot_dht/#function","title":"Function","text":"<p><code>AIOT_DHT(sensor=\"dht20\"|\"aht20\"|\"dht11\", *, board=None, sda=None, scl=None, pin=None)</code> T\u1ea1o \u0111\u1ed1i t\u01b0\u1ee3ng c\u1ea3m bi\u1ebfn. I2C (DHT20/AHT20) d\u00f9ng <code>sda/scl</code> ho\u1eb7c preset <code>board</code>; DHT11 d\u00f9ng <code>pin</code>.</p> <p><code>read() -&gt; bool</code> C\u1eadp nh\u1eadt d\u1eef li\u1ec7u. Tr\u1ea3 v\u1ec1 <code>True</code> n\u1ebfu th\u00e0nh c\u00f4ng.</p> <p><code>temperature() -&gt; float</code> Nhi\u1ec7t \u0111\u1ed9 (\u00b0C).</p> <p><code>humidity() -&gt; float</code> \u0110\u1ed9 \u1ea9m (%RH).</p> <p><code>status() -&gt; dict</code> Th\u00f4ng tin g\u1ee1 l\u1ed7i (raw, l\u1ed7i g\u1ea7n nh\u1ea5t\u2026).</p>"},{"location":"api/aiot_dht/#sample-code","title":"Sample Code","text":"<pre><code>from aiot_dht import AIOT_DHT\n\nd = AIOT_DHT(sensor=\"dht20\", board=\"s3\")  # ho\u1eb7c truy\u1ec1n sda/scl\nif d.read():\n    print(\"T:\", d.temperature(), \"C  H:\", d.humidity(), \"%\")\nelse:\n    print(\"Read fail\")\n</code></pre>"},{"location":"api/mqtt/","title":"<code>mqtt</code> \u2014 MQTT Helper","text":"<p>C\u00e1c h\u00e0m ti\u1ec7n \u00edch k\u1ebft n\u1ed1i Wi\u2011Fi v\u00e0 MQTT broker.</p>"},{"location":"api/mqtt/#function","title":"Function","text":"<p><code>connect_wifi(ssid, password, timeout_s=15) -&gt; ip</code> K\u1ebft n\u1ed1i Wi\u2011Fi, tr\u1ea3 v\u1ec1 IP n\u1ebfu th\u00e0nh c\u00f4ng.</p> <p><code>connect_broker(server, port=1883, username=None, password=None, *, client_id=None, keepalive=30, use_tls=False, ssl_params=None, clean_session=True, will_topic=None, will_msg=None, will_qos=0, will_retain=False)</code> K\u1ebft n\u1ed1i t\u1edbi MQTT broker, c\u1ea5u h\u00ecnh Last Will n\u1ebfu c\u1ea7n.</p> <p><code>on_receive_message(topic, callback, *, qos=0)</code> \u0110\u0103ng k\u00fd h\u00e0m <code>callback(payload, topic)</code> cho <code>topic</code> (c\u00f3 h\u1ed7 tr\u1ee3 wildcard).</p> <p><code>check_message()</code> Non\u2011block, g\u1ecdi c\u00e1c callback khi c\u00f3 tin \u0111\u1ebfn; t\u1ef1 reconnect n\u1ebfu socket l\u1ed7i.</p> <p><code>publish(topic, payload, *, qos=0, retain=False)</code> G\u1eedi d\u1eef li\u1ec7u l\u00ean broker.</p> <p><code>disconnect()</code> Ng\u1eaft k\u1ebft n\u1ed1i.</p>"},{"location":"api/mqtt/#sample-code","title":"Sample Code","text":"<pre><code>import time\nimport mqtt\n\nmqtt.connect_wifi(\"SSID\", \"PASS\")\nmqtt.connect_broker(\"broker.hivemq.com\", 1883, client_id=\"esp32-demo\")\n\ndef on_msg(payload, topic):\n    print(\"RX:\", topic, payload)\n\nmqtt.on_receive_message(\"demo/esp32/#\", on_msg)\n\ni = 0\nwhile True:\n    mqtt.check_message()\n    mqtt.publish(\"demo/esp32/uptime\", str(i))\n    i += 1\n    time.sleep(1)\n</code></pre>"},{"location":"api/oled_i2c/","title":"<code>oled_i2c</code> \u2014 OLED I2C Module","text":"<p>Ch\u1ee9c n\u0103ng ch\u00ednh v\u00e0 ch\u1ee9c n\u0103ng c\u1ee7a oled_i2c (SSD1306/SH1106). Ph\u1ea7n n\u00e0y tr\u00ecnh b\u00e0y theo \u0111\u1ecbnh d\u1ea1ng Function / Sample Code nh\u01b0 b\u1ea1n y\u00eau c\u1ea7u.</p>"},{"location":"api/oled_i2c/#function","title":"Function","text":"<p><code>oled = Oled(board=\"s3\", driver=\"SSD1306|SH1106\", *, addr=0x3C, width=128, height=64, i2c_sda=None, i2c_scl=None, freq=400_000, backend=\"soft\", sh1106_offset=2)</code> Kh\u1edfi t\u1ea1o \u0111\u1ed1i t\u01b0\u1ee3ng m\u00e0n h\u00ecnh OLED qua I2C. - board: preset ch\u00e2n I2C. <code>\"s3\"</code> (m\u1eb7c \u0111\u1ecbnh: <code>SDA=17</code>, <code>SCL=18</code>) ho\u1eb7c t\u1ef1 truy\u1ec1n <code>i2c_sda/i2c_scl</code> khi \u0111\u1ec3 <code>board=None</code>. - driver: <code>SSD1306</code> (chu\u1ea9n) ho\u1eb7c <code>SH1106</code> (132 c\u1ed9t; v\u00f9ng hi\u1ec3n th\u1ecb 128 c\u1ed9t). - addr: \u0111\u1ecba ch\u1ec9 I2C (th\u01b0\u1eddng <code>0x3C</code>). - width/height: k\u00edch th\u01b0\u1edbc v\u00f9ng \u0111\u1ec7m hi\u1ec3n th\u1ecb (m\u1eb7c \u0111\u1ecbnh 128\u00d764). - backend: <code>\"soft\"</code> \u2192 d\u00f9ng <code>SoftI2C</code>, <code>\"hard\"</code> \u2192 d\u00f9ng <code>I2C</code> ph\u1ea7n c\u1ee9ng (n\u1ebfu ch\u00e2n ph\u00f9 h\u1ee3p). - freq: t\u1ea7n s\u1ed1 I2C (Hz). - sh1106_offset: d\u1ecbch c\u1ed9t \u0111\u1ec3 canh 128 c\u1ed9t v\u00e0o gi\u1eefa (th\u01b0\u1eddng = <code>2</code> cho SH1106).</p> <p><code>oled.text(TEXT, X, Y, COLOR=1)</code> V\u1ebd chu\u1ed7i <code>TEXT</code> t\u1ea1i t\u1ecda \u0111\u1ed9 <code>(X, Y)</code> v\u1edbi m\u00e0u <code>COLOR</code>. - X: 0..127 (pixel, t\u00ednh t\u1eeb tr\u00e1i qua). - Y: 0..63 (pixel, t\u00ednh t\u1eeb tr\u00ean xu\u1ed1ng). - COLOR: <code>1</code> = b\u1eadt pixel, <code>0</code> = t\u1eaft pixel. Font m\u1eb7c \u0111\u1ecbnh 8\u00d78.</p> <p><code>oled.show()</code> \u0110\u1ea9y b\u1ed9 \u0111\u1ec7m (framebuffer) ra m\u00e0n h\u00ecnh. B\u1eaft bu\u1ed9c g\u1ecdi sau khi v\u1ebd \u0111\u1ec3 th\u1ea5y n\u1ed9i dung.</p> <p><code>oled.fill(val)</code> T\u00f4 to\u00e0n m\u00e0n h\u00ecnh v\u1edbi <code>val</code> (<code>0</code> = \u0111en, <code>1</code> = tr\u1eafng). G\u1ee3i \u00fd d\u00f9ng <code>oled.clear()</code> (alias) \u0111\u1ec3 x\u00f3a nhanh.</p> <p><code>oled.clear()</code> X\u00f3a n\u1ed9i dung tr\u00ean m\u00e0n h\u00ecnh (t\u01b0\u01a1ng \u0111\u01b0\u01a1ng <code>fill(0)</code>), c\u1ea7n <code>show()</code> \u0111\u1ec3 \u00e1p d\u1ee5ng.</p> <p><code>oled.pixel(x, y, c=1)</code> \u2022 <code>oled.line(x0, y0, x1, y1, c=1)</code> \u2022 <code>oled.rect(x, y, w, h, c=1)</code> \u2022 <code>oled.fill_rect(x, y, w, h, c=1)</code> C\u00e1c API v\u1ebd c\u01a1 b\u1ea3n (\u1ee7y quy\u1ec1n t\u1eeb framebuffer chu\u1ea9n c\u1ee7a MicroPython).</p> <p><code>oled.invert(True|False)</code> \u0110\u1ea3o m\u00e0u hi\u1ec3n th\u1ecb (n\u1ebfu driver h\u1ed7 tr\u1ee3).</p> <p><code>oled.contrast(val)</code> \u0110\u1eb7t \u0111\u1ed9 t\u01b0\u01a1ng ph\u1ea3n (<code>0..255</code>, n\u1ebfu driver h\u1ed7 tr\u1ee3).</p> <p><code>oled.poweron()</code> \u2022 <code>oled.poweroff()</code> B\u1eadt/t\u1eaft ngu\u1ed3n hi\u1ec3n th\u1ecb (ti\u1ebft ki\u1ec7m n\u0103ng l\u01b0\u1ee3ng khi treo l\u00e2u).</p> <p><code>oled.info() -&gt; dict</code> Tr\u1ea3 v\u1ec1 th\u00f4ng tin: <code>{\"width\":..., \"height\":..., \"addr\":..., \"i2c_id\":...}</code> gi\u00fap g\u1ee1 l\u1ed7i nhanh.</p>"},{"location":"api/oled_i2c/#sample-code","title":"Sample Code","text":""},{"location":"api/oled_i2c/#1-hien-thi-chuoi-co-ban-ssd1306","title":"1) Hi\u1ec3n th\u1ecb chu\u1ed7i c\u01a1 b\u1ea3n (SSD1306)","text":"<pre><code>from oled import Oled\n\noled = Oled(board=\"s3\", driver=\"SSD1306\")   # ho\u1eb7c board=None, i2c_sda=17, i2c_scl=18\noled.clear()\noled.text(\"MEBLOCK IOT\", 0, 0)\noled.text(\"Hello, ESP32!\", 0, 16)\noled.show()\n</code></pre>"},{"location":"api/oled_i2c/#2-sh1106-voi-can-le-128-cot-offset","title":"2) SH1106 v\u1edbi c\u0103n l\u1ec1 128 c\u1ed9t (offset)","text":"<pre><code>from oled import Oled\n\noled = Oled(board=\"s3\", driver=\"SH1106\", sh1106_offset=2)\noled.fill(0)\nfor i in range(0, 64, 8):\n    oled.text(\"Line %d\" % (i//8), 0, i)\noled.show()\n</code></pre>"},{"location":"api/oled_i2c/#3-ve-hinh-hoc-invert","title":"3) V\u1ebd h\u00ecnh h\u1ecdc + invert","text":"<pre><code>from oled import Oled\noled = Oled(board=\"s3\", driver=\"SSD1306\")\n\noled.clear()\noled.rect(0, 0, 128, 64, 1)\noled.fill_rect(10, 10, 30, 20, 1)\noled.line(0, 32, 127, 32, 1)\noled.show()\n\noled.invert(True)\n</code></pre>"},{"location":"api/oled_i2c/#luu-y-phan-cung","title":"L\u01b0u \u00fd ph\u1ea7n c\u1ee9ng","text":"<ul> <li>\u0110\u1ecba ch\u1ec9 m\u1eb7c \u0111\u1ecbnh ph\u1ea7n l\u1edbn module OLED l\u00e0 0x3C (m\u1ed9t s\u1ed1 l\u00e0 0x3D).  </li> <li>D\u00e2y I2C n\u00ean ng\u1eafn, c\u00f3 \u0111i\u1ec7n tr\u1edf k\u00e9o\u2011l\u00ean (pull\u2011up) ph\u00f9 h\u1ee3p (th\u01b0\u1eddng 4.7k).  </li> <li>Ngu\u1ed3n 3.3V \u1ed5n \u0111\u1ecbnh; n\u1ebfu m\u00e0n h\u00ecnh nhi\u1ec5u, h\u1ea1 <code>freq</code> I2C (100k\u2013200k).</li> </ul>"},{"location":"guides/troubleshooting/","title":"X\u1eed l\u00fd l\u1ed7i","text":"Kh\u00f4ng th\u1ea5y ch\u1eef tr\u00ean SH1106 <p>Th\u1eed <code>sh1106_offset=2</code> khi kh\u1edfi t\u1ea1o <code>Oled(...)</code> \u0111\u1ec3 canh khung 128 c\u1ed9t v\u00e0o khu v\u1ef1c hi\u1ec3n th\u1ecb.</p> MQTT kh\u00f4ng nh\u1eadn \u0111\u01b0\u1ee3c tin <ul> <li>\u0110\u1ea3m b\u1ea3o \u0111\u00e3 g\u1ecdi <code>mqtt.check_message()</code> \u0111\u1ec1u trong v\u00f2ng l\u1eb7p ch\u00ednh.</li> <li>Ki\u1ec3m tra wildcard trong <code>on_receive_message(\"demo/esp32/#\", cb)</code>.</li> </ul> DHT20 \u0111\u1ecdc fail <ul> <li>Ki\u1ec3m tra \u0111i\u1ec7n tr\u1edf k\u00e9o\u2011l\u00ean (pull\u2011up) I2C v\u00e0 \u0111\u1ecba ch\u1ec9 <code>0x38</code>.</li> <li>D\u00e2y I2C ng\u1eafn, ngu\u1ed3n \u1ed5n \u0111\u1ecbnh.</li> </ul>"}]}